
#!/bin/bash


# Set the alert tone for battery, or leave it as empty quotes.
# .mp3 or .ogg audio file
alarm="/home/tanish2002/bin/battery.ogg"

# Notify when below this percentage
warning_level=11

# How often to check battery status, in minutes
check_interval=60

while true; do
  battery_level=$(acpi -b \
    | cut -d, -f2 | cut --characters=2,3,4 \
    | sed 's/%//g')
  charging=$(acpi -b | grep -c "Charging")

  # When battery is low, and not already charging
  if [ $battery_level -lt $warning_level ] &&
     [ $charging -eq 0 ]
  then
    mplayer "$alarm" &
    notify-send " Low battery: ${battery_level}% " \
      " Plug into mains power " -t 8000
  fi
  
  sleep ${check_interval}s
done
